0<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div style="height: 60vh;width: 100%;background: #ccc"></div>
<script>
    /* 30-seconds-of-code */
    /*

    JavaScript Array filter() æ–¹æ³•

    è¯­æ³•ï¼šarray.filter(function(currentValue,index,arr), thisValue)

    funcå¿…é¡»ã€‚å‡½æ•°ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°
    currentValue 	å¿…é¡»ã€‚å½“å‰å…ƒç´ çš„å€¼
    index	å¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼
    arr	å¯é€‰ã€‚å½“å‰å…ƒç´ å±žäºŽçš„æ•°ç»„å¯¹è±¡
    thisValue ä¼ é€’ç»™å‡½æ•°ï¼Œç”¨ä½œ "this" çš„å€¼ã€‚

    */
    /*æ•°ç»„ä¸Žå¯¹è±¡çš„ç»“æž„èµ‹å€¼;fooæ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œbazæ‰æ˜¯å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯å˜é‡bazï¼Œè€Œä¸æ˜¯æ¨¡å¼fooã€‚*/
    // let { foo: baz} = { foo: 'aaa', name: 'bbb' };
    // console.log(baz) ;// aaa
    // console.log(foo) ;// error: foo is not defined
    let {foo} = {
        foo: ['aaa',
            {price: 32}],
        name: 'bbb'
    };
    console.log(foo[1]) ;
    /*æ•°ç»„*/
    //å¾—åˆ°ä¸€ä¸ªå…ƒç´ ä¸­ä¸åŒ…å«3çš„æ•°ç»„
    let arr = ['10', '12', '23', '44', '42'];
    let newArr = arr.filter(item => item.indexOf('3') < 0);  //item.indexOf('3')å…ƒç´ ä¸­æœ‰3è¿”å›žç¬¬ä¸€æ¬¡å‡ºçŽ°3çš„ç´¢å¼•ï¼Œæ²¡æœ‰åˆ™è¿”å›ž-1
    console.log(newArr);

    //è¿žæŽ¥ä¸¤ä¸ªæ•°ç»„
    const ArrayConcat = (arr, ...args) => [].concat(arr, ...args);
    console.log(ArrayConcat([1], [1, 2, 3, [4, 5]]));//[1,1, 2, 3, [4,5]]

    //ä¸¤ä¸ªæ•°ç»„ä¸­éžå…¬æœ‰çš„å€¼,è¿”å›žä¸€ä¸ªæ–°æ•°ç»„
    const difference = (a, b) => {
        const s = new Set(b);
        return a.filter(x => !s.has(x)) // Set å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»åž‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŽŸå§‹å€¼æˆ–è€…æ˜¯å¯¹è±¡å¼•ç”¨ã€‚
    };
    console.log(difference([1, 2, 3, 2, 4], [1, 3, 3]));

    //åˆ¤æ–­æ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šå…ƒç´ ï¼Œæ²¡æœ‰è¿”å›žfalse,æœ‰è¿”å›žtrue
    const includes = (collection, val, fromIndex = 0) => collection.slice(fromIndex).indexOf(val) !== -1;
    console.log("sfg" + includes("30-seconds-of-code", "code"));
    console.log(includes([[1, 5], 2, 3, 4], 5, 2));//åªèƒ½åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰æŸå…ƒç´ ï¼Œç”±äºŽæ•°ç»„æ˜¯å¼•ç”¨ç±»åž‹ï¼Œæ‰€ä»¥ä¸èƒ½åˆ¤æ–­è¯¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸæ•°ç»„


    const remove = (arr, func) =>
    Array.isArray(arr) ? arr.filter(func).reduce((acc, val) => {
        arr.splice(arr.indexOf(val), 1);
    return acc.concat(val);
    }, [])
    : [];

    //Array.isArray(arr) ? arr.filter(func) : [];
    remove([1, 2, 3, 4], n => n % 2 === 0);


    //éšæœºå…ƒç´ 
    const sample = arr => arr[Math.floor(Math.random() * arr.length)];
    console.log(sample(['a', 'b', 'g', 'k']));

    //æ•°ç»„ä¸ŽSetå¯¹è±¡ä¹‹é—´çš„è½¬æ¢å¯ä»¥å®žçŽ°æ•°ç»„çš„åŽ»é‡
    //Array union
    const union = (a, b) => Array.from(new Set([...a, ...b]));//æ•°ç»„ä¸ŽSetå¯¹è±¡ä¹‹é—´çš„è½¬æ¢å¯ä»¥å®žçŽ°æ•°ç»„çš„åŽ»é‡ï¼ˆæ•°ç»„å¯é‡å¤ï¼ŒSetä¸å¯é‡å¤ï¼‰
    union([1, 2, 3], [4, 3, 2]); //[1,2,3,4]

    //æ•°ç»„æŽ’é™¤æ‰€æœ‰ç»™å®šå€¼

    const without = (arr, ...args) => arr.filter(
        (v => args.indexOf(v) === -1)
    );
    console.log(without([2, 1, 2, 3], 1, 2));

    //æ•°ç»„æ‰€æœ‰æ•°å€¼çš„å¹³å‡æ•°
    const average = arr => arr.reduce((acc, val) => acc + val, 0) / arr.length;
    // average([1,2,3]) -> 2

    function arrcount(acc,val) {
        return acc+val;
    }
    console.log(arrcount([1,2,3])+'aa')

    //è®¡ç®—ä¸€ä¸ªæ•°åœ¨æ•°ç»„ä¸­é•¿å‡ºçŽ°çš„æ¬¡æ•°
    const countOccurrences = (arr, value) => arr.reduce((a, v) => v === value ? a + 1 : a + 0, 0);
    countOccurrences([1, 1, 2, 1, 2, 3], 1);//3


    const deepFlatten = arr => [].concat(...arr.map(v => Array.isArray(v) ? deepFlatten(v) : v));
    // deepFlatten([1,[2],[[3],4],5]) -> [1,2,3,4,5]

    const dropElements = (arr, func) => {
        while (arr.length > 0 && !func(arr[0])) arr.shift();
        return arr;
    };

    // dropElements([1, 2, 3, 4], n => n >= 3) -> [3,4]


    function dropEle(n) {
        return n >= 3;
    }

    const drope = (arr, func) => {
        while (arr.length > 0 && !func(arr[0])) arr.shift();
        return arr
    };
    console.log(drope([1, 2, 3, 4], dropEle));

    let run = function () {
        let _promise = new Promise(function (resolve, reject) {
            setTimeout(function () {
                let rand = Math.random();
                if (rand < 0.5) {
                    resolve("resolve" + rand);
                } else {
                    reject("reject" + rand);
                }
            }, 2000);
        });
        return _promise;
    };
    run().then(function (data) {
        console.log(data);
    });

    run().then(function (data) {
        //å¤„ç†resolveçš„ä»£ç 
        console.log("Promiseè¢«ç½®ä¸ºresolve", data);
    }, function (data) {
        //å¤„ç†rejectçš„ä»£ç 
        console.log("ç¨‹åºè¢«ç½®ä¸ºäº†reject", data);
    });
    console.log('Math.trunc:' + Math.trunc(NaN));
    console.log(2 ** 3);

    function Point(x = 0, y = 0) {
        this.x = x;
        this.y = y;
    }

    const p = new Point('jhjh', 3);
    console.log(p);

    function Answer() {
        return 42;
    }

    console.log(Answer()); // âœ… 42
    console.log(new Answer()); // ðŸ˜³ Answer {}

    //aå…ƒä¸€ç“¶é…’  bä¸ªç“¶ç›–ä¸€ç“¶é…’  cä¸ªç©ºç“¶ä¸€ç“¶é…’  då…ƒé’±
    function jsTest(a, b, c, d) {
        var count = 0, k = 0, m = 0, n = 0;//æ€»å…±å¯ä»¥ä¹°çš„é…’ï¼›å½“å‰å¯å…‘æ¢çš„é…’ï¼›å‰©ä½™ç“¶ç›–ï¼Œå‰©ä½™ç©ºç“¶
        count = parseInt(d / a);
        k = parseInt(d / a);
        duihuan(b, c, count, k, m, n);

        function duihuan(b, c, count, k, m, n) {
            while ((k + m >= b) || (k + n >= c)) {
                var e = k;
                k = parseInt((e + m) / b) + parseInt(((e + n) / c));
                count += k;
                m = (e + m) % b;
                n = (e + n) % c;
            }
            m = k + m;
            n = k + n;
            console.log("å¯ä¹°é…’" + count + ";å‰©ä½™ç“¶ç›–ï¼š" + m + "å‰©ä½™ç©ºç“¶ï¼š" + n)
        }
    }
    // jsTest(5, 5, 3, 79);

    const round=(n,decimals=0)=>Number(`${Math.round(`${n}e${decimals}`)}e-${decimals}`);
    console.log(round(1.345,2));//1.35
    console.log(round(1.345,1));//1.3


    function Foo() {
        getName = function () { alert (1); };
        return this;
    }
    Foo.getName = function () { alert (2);};
    Foo.prototype.getName = function () { alert (3);};
    var getName = function () { alert (4);};
    function getName() { alert (5);}

    //è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æžœï¼š
    Foo.getName();
    getName();
    Foo().getName();
    getName();
    new Foo.getName();
    new Foo().getName();
    new new Foo().getName();


</script>

</body>
</html>
